== Repository Importance Priority Score

The extensive volume of code repositories managed by organizations presents a significant challenge for security. Deciding where to focus security efforts is crucial. Repository Importance Score provides a data-driven approach to prioritize security efforts across multiple code repositories by quantifying the significance of each repository. Such data and criteria include the repository maintenance and usage frequency, characteristics, and the path to production. This score can be customized to incorporate your organization's specific security priorities. For more information refer to <<[#custom-repo-importance,Custom Repository Importance Scores>> below.

By leveraging this scoring system, teams can understand the relative importance of repositories. This enables them to effectively allocate security resources and prioritize addressing issues in the most critical repositories first, safeguarding the safety of business-critical functionalities. You can view the Repository Importance Score under the "Priority Level" column on the 'Repositories' page. 


//Alt name: Repository Importance Priority Score, Prioritize Repositories





////
Security management across code repositories presents a growing challenge as codebases expand and teams adopt microservices architectures. Efficient resource allocation for security efforts hinges on identifying the critical repositories that require the most attention in order to allocate resources effectively.  

The Repository Score is a dynamic metric designed to address the challenges of prioritizing security issues within a multi-repository environment. By incorporating factors like repository maintenance frequency, characteristics, path to production and more, Repository Score provides a quantitative measure (1-10) to guide security teams towards the most impactful remediation efforts. This data-driven approach empowers developers to optimize security resource allocation and focus on vulnerabilities that pose the greatest risk. The data collection processes is automated and scheduled at regular intervals to ensure that scores are based on the latest information.

You can filter CAS findings and insights based on the Code Repository Importance Score across Project, CI/CD Risks, SBOM, and Technologies pages to focus on repositories with higher importance.


In the fast-paced world of software development, our customers face significant challenges in efficiently prioritizing security issues across their numerous code repositories. Without a clear understanding of which repositories are most actively used and critical to their operations, it becomes difficult to allocate resources effectively. To address this, we introduce the Repo Scoreâ€”an innovative solution designed to streamline decision-making processes for security teams.

The Repo Score is a dynamic, actionable metric ranging from 1 to 100 that quantifies the active usage and significance of each integrated code repository relative to others. By providing a clear measure of a repository's importance and priority, this score empowers security teams to focus their efforts on the most crucial areas first, ensuring that resources are allocated where they are needed most. With the Repo Score, our objective is to enhance efficiency and effectiveness in managing and mitigating security risks within code repositories, ultimately contributing to a more secure and robust software development lifecycle.
////
=== System-Generated Repository Importance Score 

Repository scores are calculated by collecting and analyzing various data points, including codebase characteristics, maintenance and usage frequency, and path to production environments. This data is then used to generate a dynamic score (1-10) stored within the system's database or repository for easy retrieval and presentation on relevant CAS pages, such as the Application Asset Graph. Data calculated includes:
// TODO -redo the above when concrete data such as where the repo score can be seen, becomes available

* *Repository commits*: Includes the total number of commits, the number of commits over the last *X* months, and the time of the last commit 
* *Repository Issues*: Includes the total number of issues detected in a repository, and the last time an issue was reported
* *Repository releases/tags*: Includes the total number of tags and releases, and the last time a tag or release was created 
* *Repository characteristics*: Includes whether the repository was forked, if it is private or public, if it is part of your organization and whether it is archived
* *Repository relationships*: Includes all collaborators, CI files, connected pipelines (including whether they build an image), and whether the repository is associated with a container  (repo > pipeline > image > container) 





////
You can customize Repository Importance scores to suit your organization requirements. Provide a comment explaining the manual score, the reasoning behind it, and the name of the user performing the change. When a manual score is applied, a comment explaining the reasoning behind the adjustment is required. Once set manually, the system stops calculating the score for the repository, using the manual score instead. You can restore automatic calculation that will override the manual calculation. 
////

=== Manage Repository Importance Score 

View and edit the Repository Importance Score on the 'Repositories' page.

NOTE: See <<#custom-repo-importance,Custom Repository Importance Scores>> below to edit a repository's score.

. In *Application Security*, select *Repositories*.
+
The Repository Importance Score is displayed in the *Priority Level* column.
//By default, repositories are sorted according to Priority Importance. Values: "High', 'Medium, 'Low'.
+
image::application-security/[]

. Filter repositories based on their Importance Score using the *Priority Level* filter. Values: 'High', Medium', 'Low'.

=== Understanding Repository Importance Score

Hover over a repository's score or click on a repository to open the sidecar *Overview* tab. Both options display the criteria used to calculate the repository's importance score, such as maintenance frequency, characteristics, path to production, and more. This allows you to analyze the factors contributing to the Repository Importance Score and understand how it is calculated.
+
image:application-security/[]

[.task]

[#custom-repo-importance]
=== Custom Repository Importance Scores

You can customize the Importance Score of a repository to align with your organization's priorities. You can include a brief comment explaining the rationale behind the change. This comment, along with the user name of the person who made the change will be displayed alongside the score. After manual configuration, Prisma Cloud will stop the automatic calculation and use your defined score instead.

NOTE: You can reset any manually set scores for code repositories. Upon resetting, Prisma Cloud will resume the automatic calculation of the repository's score and remove any associated user comments.

[.procedure]

To configure the repository importance score:

. Option #1: In *Application Security*, select *Repositories* > click on the menu in the *Actions* column > *Edit Priority Level*.
+
image::application-security/[]
+
Option #2: On the *Repository* page, select a repository > click *Edit Priority Level* in the repository sidecar.
+
NOTE: Both options open the *Edit Priority Level* popup.
+
image::application-security/[]

. Fill in the values in the provided fields. 

.. Set the priority level in the *Set Manually* field. Values: 'Low': 1-4, 'Medium': 5-7, 'High': 8-10.
+
NOTE: Select *Reset* to reset the values.

.. Add a comment (optional).

. Select *Save*.

=== Prioritize Repositories (Graph View)  

The CAS Application Graph enables you to investigate repositories in graph view. Use the  *Simple Mode Query Builder* in *Investigate* to filter repositories based on their assigned repository importance score, enabling you to prioritize and focus your investigation efforts on critical repositories that potentially impact your most business-critical applications.  

[.procedure]
==== Build a Repository Importance Score Query

You can build a query to prioritize repositories based on their Repository Importance Score through the *Investigate Simple Mode Query Builder*. 

[.task]

. In *Application Security*, select the *Investigate* tab.
. Click *Select a Query Type* > *Application Asset*.
. For *Type is*, select *VCS Repository*.
. In the WHERE clause, select *Score* > *Intersects* operator > Select a value: High, Medium, Low.
+
The repositories matching your criteria are displayed in graph mode. 
+
image::application-security/repo-imp1.1.png[]

For more information on viewing your software development life cycle (SLDC) as a graphical representation that allows you to explore assets and connections, refer to xref: [Application Asset Queries].
//TODO add link


////
The CAS Application Graph enables you to utilize the Repository Importance Score when filtering search results, enabling focus on critical repositories in your application landscape. Incorporating Importance Score into CAS Application Graph queries provides valuable insights to prioritize investigations and optimize security posture management.

The *Investigate Simple Mode Query Builder* allows you to filter repositories based on their assigned Importance Score. This functionality enables you to:

* *Prioritize Critical Repositories*: Focus your investigation efforts on repositories with higher importance scores. This ensures you prioritize security issues that potentially impact your most business-critical applications
* *Granular Search*: Filter by a specific range of scores to refine your search results. For instance, you might target repositories with a score of 70 or above, indicating a high level of business criticality
F// TODO linkor more information on how to build a prioritize a query as part of a query see xref:[]
//TODO link to Query builder with Repository Importance Score attribute

////


// TODO Is "In addition you can filter repositories specifying a range of scores" part of the query attributes?

For more information on how to build a prioritize a query as part of a query see xref:[]
//TODO link to Query builder with Repository Importance Score attribute 

////
=== Repository Importance Score in Dashboards 

You can customize CAS dashboard widgets based on Repository Importance Score to focus on repositories with higher importance.

You can view Repository Importance scores for all integrated code repositories in the *Repositories* table, allowing you to prioritize vulnerabilities based on potential impact. Filters and sorting by Repository Importance scores allow you prioritize repositories that require attention.

Application context allows you to focus on code repositories and issues that are part of high business impact on your organization. 

 Perform the following actions by navigating to *Application Security* > *Repositories* page. 

* Group applications 
* Filter integrated code repositories based on the specific application they belong to
* Filter by application impact level

In addition, you can filter the *Project*, *CI/CD Risks*, *SBOM*, and *Technologies* tables based on Repository Importance scores.
////


==== Manage Repository Importance Scores via REST API

The Repository Importance Score API empowers you to automate workflows and manage Importance Scores for your code repositories programmatically. This API supports both fetching and setting scores, allowing for bulk operations to streamline your security posture management.

*Key Functionalities*

* *Retrieve Importance Scores*: Utilize the API to efficiently retrieve the importance score(s) for one or more repositories. This functionality is ideal for integrating importance scores into existing workflows or dashboards
* *Set Scores*: Programmatically set the importance score for one or more repositories. You can optionally include a comment to explain the rationale behind the score adjustment. This comment will be displayed alongside the score for future reference
* *Bulk Operations*: Both retrieval and update functionalities support bulk operations, allowing you to efficiently manage the importance scores for a large number of repositories simultaneously
   
*Limitation*: The request can handle a maximum of 5000 repositories.

For more information, refer to the https://pan.dev/prisma-cloud/api/code/get-vcs-repository-page/[GET Repositories Page] API documentation.






