== Repository Importance Priority Score

The extensive volume of code repositories managed by organizations presents a significant challenge for security. Deciding where to focus security efforts is crucial. Repository Importance Score provides a data-driven approach to prioritize security efforts across multiple code repositories by quantifying the significance of each repository. Such data and criteria include the repository maintenance and usage frequency, characteristics, and the path to production. This score can be customized to incorporate your organization's specific security priorities.
By leveraging this scoring system, teams can understand the relative importance of repositories. This enables them to effectively allocate security resources and prioritize addressing issues in the most critical repositories first, safeguarding the safety of business-critical functionalities. The "Priority Level" column, available in the tables of the 'Project', 'CI/CD Risks', 'SBOM, and 'Technologies' pages (*provide links*), enables you to view the code repository 'Importance Score'.


//Alt name: Repository Importance Priority Score, Prioritize Repositories

*WIP*



////
Security management across code repositories presents a growing challenge as codebases expand and teams adopt microservices architectures. Efficient resource allocation for security efforts hinges on identifying the critical repositories that require the most attention in order to allocate resources effectively.  

The Repository Score is a dynamic metric designed to address the challenges of prioritizing security issues within a multi-repository environment. By incorporating factors like repository maintenance frequency, characteristics, path to production and more, Repository Score provides a quantitative measure (1-10) to guide security teams towards the most impactful remediation efforts. This data-driven approach empowers developers to optimize security resource allocation and focus on vulnerabilities that pose the greatest risk. The data collection processes is automated and scheduled at regular intervals to ensure that scores are based on the latest information.

You can filter CAS findings and insights based on the Code Repository Importance Score across Project, CI/CD Risks, SBOM, and Technologies pages to focus on repositories with higher importance.


In the fast-paced world of software development, our customers face significant challenges in efficiently prioritizing security issues across their numerous code repositories. Without a clear understanding of which repositories are most actively used and critical to their operations, it becomes difficult to allocate resources effectively. To address this, we introduce the Repo Scoreâ€”an innovative solution designed to streamline decision-making processes for security teams.

The Repo Score is a dynamic, actionable metric ranging from 1 to 100 that quantifies the active usage and significance of each integrated code repository relative to others. By providing a clear measure of a repository's importance and priority, this score empowers security teams to focus their efforts on the most crucial areas first, ensuring that resources are allocated where they are needed most. With the Repo Score, our objective is to enhance efficiency and effectiveness in managing and mitigating security risks within code repositories, ultimately contributing to a more secure and robust software development lifecycle.
////
=== Calculate Repository Importance Scores

Repository scores are calculated by collecting and analyzing various data points, including codebase characteristics, maintenance and usage frequency, and path to production environments. This data is then used to generate a dynamic score (1-10) stored within the system's database or repository for easy retrieval and presentation on relevant CAS pages, such as the Application Asset Graph. Data calculated includes:
// TODO -redo the above when concrete data such as where the repo score can be seen, becomes available

* *Repository commits*: Includes the total number of commits, the number of commits over the last *X* months, and the time of the last commit 
* *Repository Issues*: Includes the total number of issues detected in a repository, and the last time an issue was reported
* *Repository releases/tags*: Includes the total number of tags and releases, and the last time a tag or release was created 
* *Repository characteristics*: Includes whether the repository was forked, if it is private or public, if it is part of your organization and whether it is archived
* *Repository relationships*: Includes all collaborators, CI files, connected pipelines (including whether they build an image), and whether the repository is associated with a container  (repo > pipeline > image > container) 


[.task]

[#custom-repo-importance]
=== Customize Repository Importance Scores

You can customize the Importance Score of a repository to align with your organization's priorities. You can include a brief comment explaining the rationale behind the change. This comment, along with the user name of the person who made the change will be displayed alongside the score. Once manually configured, Prisma Cloud stops automatic calculation and uses your defined score.
If required, you can reset any manually set scores for code repositories. Upon resetting, Prisma Cloud resumes automatic calculation of the repository's score and removes any associated user comments.

[.procedure]

To customize the Importance Score of a repository:

. Option #1: In *Application Security*, select *Repositories* > click on the menu in the *Actions* column > *Edit Priority Level*.
+
image::application-security/[]
+
Option #2: On the Repository page, select a repository > click *Edit Priority Level* in the repository sidecar.
+
NOTE: Using either option, the *Edit Priority Level* popup is displayed.
+
image::application-security/[]

. Fill in the values in the provided fields. 

.. Set the priority level in the *Set Manually* field. Values: 'Low': 1-4, 'Medium': 5-7, 'High': 8-10.
+
NOTE: Select Reset to reset the values.

.. Add a comment (optional).

. Select *Save*.




////
You can customize Repository Importance scores to suit your organization requirements. Provide a comment explaining the manual score, the reasoning behind it, and the name of the user performing the change. When a manual score is applied, a comment explaining the reasoning behind the adjustment is required. Once set manually, the system stops calculating the score for the repository, using the manual score instead. You can restore automatic calculation that will override the manual calculation. 
////

=== Prioritize Repository Importance on the Projects Page

Repository Importance in the 'Projects' page is similar across other tables in the 'CI/CD Risks', 'SBOM, and 'Technologies' pages. Once you understand its use within 'Projects', you can easily apply the same principles to navigate and prioritize security efforts in other sections.

To view the importance of a repository in your organization:

. In *Application Security*, select *Repositories*.
+ 
By default, repositories are sorted according to Priority Importance. Values: "High', 'Medium, 'Low'.

. View *Repository Importance Score Details*: Hover over a *Priority Level* value for a repository in the table to view the criteria that contributed to or calculated the score indicating the importance of the repository, such as repository maintenance frequency, repository characteristics, the repository path to production and more. 
+
This allows you to analyze the factors contributing to a repository's Code Repository Importance Score and understand how the score is calculated.
+
image:application-security/[]

. Filter the Repositories table according to a range of scores based on their Importance Score. Values: "High', 'Medium, 'Low'. You can also sort repositories based on their score.
+
image:application-security/[]

. To view additional details of the repository's Importance Score, select the repository.
+
The Priority Level details are displayed under the *Overview* tab of the repository sidecar.
+
image:application-security/[]


===  Prioritize Repositories (Graph View)  

The CAS Application Graph enables you to utilize the Repository Importance Score when filtering search results, enabling focus on critical repositories in your application landscape. Incorporating Importance Score into CAS Application Graph queries provides valuable insights to prioritize investigations and optimize security posture management.

The *Investigate Simple Mode Query Builder* allows you to filter repositories based on their assigned Importance Score. This functionality enables you to:

* *Prioritize Critical Repositories*: Focus your investigation efforts on repositories with higher importance scores. This ensures you prioritize security issues that potentially impact your most business-critical applications
* *Granular Search*: Filter by a specific range of scores to refine your search results. For instance, you might target repositories with a score of 70 or above, indicating a high level of business criticality
F// TODO linkor more information on how to build a prioritize a query as part of a query see xref:[]
//TODO link to Query builder with Repository Importance Score attribute


////

You can facilitate efficient security analysis by prioritizing repositories based on the Repository Importance Score attribute of a Repository node as part of a query built through the *Investigate Simple Mode Query Builder*. 
// TODO Is "In addition you can filter repositories specifying a range of scores" part of the query attributes?

For more information on how to build a prioritize a query as part of a query see xref:[]
//TODO link to Query builder with Repository Importance Score attribute 
////

=== Dashboard View 

You can customize CAS dashboard widgets based on Repository Importance Score to focus on repositories with higher importance.

You can view Repository Importance scores for all integrated code repositories in the *Repositories* table, allowing you to prioritize vulnerabilities based on potential impact. Filters and sorting by Repository Importance scores allow you prioritize repositories that require attention.

Application context allows you to focus on code repositories and issues that are part of high business impact on your organization. 

 Perform the following actions by navigating to *Application Security* > *Repositories* page. 

* Group applications 
* Filter integrated code repositories based on the specific application they belong to
* Filter by application impact level

In addition, you can filter the *Project*, *CI/CD Risks*, *SBOM*, and *Technologies* tables based on Repository Importance scores.

==== Manage Repository Importance Scores via REST API

You can automate application management and run bulk commands through the Prisma Cloud REST API. This empowers you to efficiently automate process and run bulk commands, including:

* Fetching repositories scores
* Setting scores and leaving comments
* Bulk operations: Support for all CRUD operations 
   
*Limitation*: The request can handle a maximum of 5000 repositories.

For more information, refer to the https://pan.dev/prisma-cloud/api/code/get-vcs-repository-page/[GET Repositories Page] API documentation.






